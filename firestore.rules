/**
 * This ruleset enforces a security model for an internal-facing application
 * (like a Barista or Staff app) where any authenticated user has full
 * management access to all data.
 *
 * Core Philosophy:
 * Access is granted based on authentication status alone. If a user is signed
 * in, they are considered a trusted operator and can perform any action.
 * Unauthenticated users have no access at all.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if the user is signed in.
    function isSignedIn() {
      return request.auth != null;
    }

    // Default deny all access unless explicitly allowed.
    // This rule allows any authenticated user to read, write, create, update,
    // delete, and list documents in ANY collection. This is a simple and
    // effective model for internal staff applications.
    match /{document=**} {
      allow read, write: if isSignedIn();
    }
  }
}
